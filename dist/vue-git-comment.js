!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueGitComment=e():t.VueGitComment=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="Pb8N")}({"1h2D":function(t,e){},CQto:function(t,e){},Okxu:function(t,e){},Pb8N:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={client_id:"",client_secret:"",access_token:"",owner:"",repo:"",key:"",loading:!0,ifLogin:!1,userInfo:{avatar_url:""},likedNum:32,commentsNum:23,commentList:[],sortedAsc:!1,update:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}},o={data:function(){return{heartIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z"/></svg>',store:s,liked:!0}},methods:{toggleLike:function(){this.liked=!this.liked},changeSort:function(t){this.store.sortedAsc=t}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-header"},[n("span",{staticClass:"like-item",on:{click:t.toggleLike}},[n("span",{staticClass:"heart-icon",class:{liked:t.liked},domProps:{innerHTML:t._s(t.heartIcon)}}),t._v(" "),n("span",{staticClass:"heart-txt"},[n("strong",[t._v(t._s(t.store.likedNum))]),t._v(" Liked\n        ")])]),t._v(" "),n("span",{staticClass:"comment-num"},[t._v("\n        •\n        "),n("strong",[t._v(t._s(t.store.commentsNum))]),t._v(" Comments\n    ")]),t._v(" "),n("a",{staticClass:"issue-link",attrs:{href:"javascript:void(0)"}},[t._v("Issue Page")]),t._v(" "),n("strong",{staticClass:"sort-item",class:{active:t.store.sortedAsc},attrs:{title:"sort by old"},on:{click:function(e){t.changeSort(!0)}}},[t._v("ASC")]),t._v(" "),n("strong",{staticClass:"sort-item"},[t._v("•")]),t._v(" "),n("strong",{staticClass:"sort-item",class:{active:!t.store.sortedAsc},attrs:{title:"sort by new"},on:{click:function(e){t.changeSort(!1)}}},[t._v("DESC")])])},staticRenderFns:[]};var r={data:function(){return{store:s}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comment-body"},[this.store.commentList.length?e("div",{staticClass:"comment-list"}):e("div",{staticClass:"comment-loading"},[this._v("loading ...")])])},staticRenderFns:[]};var c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"comment-pagination"},[this._v("\n    this is pagination.\n")])},staticRenderFns:[]};var u=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new Promise(function(t,n){e.resolve=t,e.reject=n});this.then=n.then.bind(n),this.catch=n.catch.bind(n),this.promise=n};function l(t){return Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function d(t,e){return~t.indexOf("?")?("&"!==t[t.length-1]&&(t="&"+t),t+l(e)):t+"?"+l(e)}var h="https://api.github.com";function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t=t.toUpperCase(),/^http/.test(e)||(e=h+e),o&&(e="https://cors-anywhere.herokuapp.com/"+e);var i=new u,r=new XMLHttpRequest;return r.onreadystatechange=function(){4==this.readyState&&200==this.status&&i.resolve(this.responseText)},r.onerror=function(t){i.reject(t.message)},"GET"===t?(e=d(e,n),n=null):"POST"===t&&(n=JSON.stringify(n)),r.open(t,e,!0),s.access_token&&r.setRequestHeader("Authorization","token "+s.access_token),"POST"===t&&r.setRequestHeader("Content-Type","application/json"),r.send(n),i.promise}var v={get:function(t,e,n){return m("get",t,e,n)},post:function(t,e,n){return m("post",t,e,n)}};var f={data:function(){return{store:s,githubIcon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M25 10c-8.3 0-15 6.7-15 15 0 6.6 4.3 12.2 10.3 14.2.8.1 1-.3 1-.7v-2.6c-4.2.9-5.1-2-5.1-2-.7-1.7-1.7-2.2-1.7-2.2-1.4-.9.1-.9.1-.9 1.5.1 2.3 1.5 2.3 1.5 1.3 2.3 3.5 1.6 4.4 1.2.1-1 .5-1.6 1-2-3.3-.4-6.8-1.7-6.8-7.4 0-1.6.6-3 1.5-4-.2-.4-.7-1.9.1-4 0 0 1.3-.4 4.1 1.5 1.2-.3 2.5-.5 3.8-.5 1.3 0 2.6.2 3.8.5 2.9-1.9 4.1-1.5 4.1-1.5.8 2.1.3 3.6.1 4 1 1 1.5 2.4 1.5 4 0 5.8-3.5 7-6.8 7.4.5.5 1 1.4 1 2.8v4.1c0 .4.3.9 1 .7 6-2 10.2-7.6 10.2-14.2C40 16.7 33.3 10 25 10z"/></svg>',showArea:!0,areaContent:"",markdownContent:"Nothing to preview",cacheList:[]}},methods:{getCache:function(t){for(var e=0,n=this.cacheList.length;e<n;e++){var s=this.cacheList[e];if(s.content===t)return s.preview}},addCache:function(t,e){this.cacheList.push({content:t,preview:e}),this.cacheList.length>10&&this.cacheList.shift()}},watch:{showArea:function(t){var e=this;if(!t&&this.areaContent.trim().length){this.areaContent=this.areaContent.trim();var n,s=this.getCache(this.areaContent);if(s)this.markdownContent=s;else this.markdownContent="Loading preview ...",(n=this.areaContent,v.post("/markdown",{mode:"gfm",text:n})).then(function(t){t=t.replace(/(<a )/g,'$1target="_blank" '),e.markdownContent=t,e.addCache(e.areaContent,t)})}else this.markdownContent="Nothing to preview"}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-editor"},[t.store.ifLogin?t._e():n("span",{staticClass:"user-avatar",attrs:{href:"javascript:void(0)"},domProps:{innerHTML:t._s(t.githubIcon)}}),t._v(" "),n("div",{staticClass:"comment-editor-main"},[n("div",{staticClass:"ce-header"},[n("div",{staticClass:"ce-tab-item",class:{active:t.showArea},on:{click:function(e){t.showArea=!0}}},[t._v("Write")]),t._v(" "),n("div",{staticClass:"ce-tab-item",class:{active:!t.showArea},on:{click:function(e){t.showArea=!1}}},[t._v("Preview")])]),t._v(" "),n("div",{staticClass:"ce-body"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.areaContent,expression:"areaContent"},{name:"show",rawName:"v-show",value:t.showArea,expression:"showArea"}],staticClass:"ce-textarea",attrs:{placeholder:"Leave a comment."},domProps:{value:t.areaContent},on:{input:function(e){e.target.composing||(t.areaContent=e.target.value)}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showArea,expression:"!showArea"}],staticClass:"markdown-body ce-preview",domProps:{innerHTML:t._s(t.markdownContent)}})]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ce-commit-row"},[e("a",{staticClass:"ce-md-link",attrs:{target:"_blank",href:"https://guides.github.com/features/mastering-markdown/"}},[this._v("Styling with Markdown is supported")]),this._v(" "),e("span",{staticClass:"ce-commit-btn"},[this._v("Comment")])])}]};var _={components:{CommentHeader:n("Z0/y")(o,i,!1,function(t){n("Okxu")},null,null).exports,CommentBody:n("Z0/y")(r,a,!1,function(t){n("p+5X")},null,null).exports,CommentPagination:n("Z0/y")({},c,!1,function(t){n("1h2D")},null,null).exports,CommentEditor:n("Z0/y")(f,p,!1,function(t){n("CQto")},null,null).exports},created:function(){new Promise(function(t){setTimeout(function(){t(10)},10)}).then(function(t){return console.log(t)})}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-git-comment"},[e("CommentHeader"),this._v(" "),e("CommentBody"),this._v(" "),e("CommentPagination"),this._v(" "),e("CommentEditor")],1)},staticRenderFns:[]};var g=n("Z0/y")(_,C,!1,function(t){n("hrzi")},null,null).exports;g.install=function(t){t.component("vue-git-comment",g)};e.default=g},"Z0/y":function(t,e){t.exports=function(t,e,n,s,o,i){var r,a=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(r=t,a=t.default);var u,l="function"==typeof a?a.options:a;if(e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId=o),i?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=u):s&&(u=s),u){var d=l.functional,h=d?l.render:l.beforeCreate;d?(l._injectStyles=u,l.render=function(t,e){return u.call(e),h(t,e)}):l.beforeCreate=h?[].concat(h,u):[u]}return{esModule:r,exports:a,options:l}}},hrzi:function(t,e){},"p+5X":function(t,e){}}).default});